#!/usr/bin/env python
# (C) Copyright 1996-2017 ECMWF.
# 
# This software is licensed under the terms of the Apache Licence Version 2.0
# which can be obtained at http://www.apache.org/licenses/LICENSE-2.0. 
# In applying this licence, ECMWF does not waive the privileges and immunities 
# granted to it by virtue of its status as an intergovernmental organisation nor
# does it submit to any jurisdiction.


import os
import sys

sys.path.append(os.path.dirname(os.path.dirname(__file__)))

from kronos.core.post_process.export_config.export_config_format import ExportConfigFormat


if __name__ == '__main__':

    # If no arguments are supplied, print the schema in a human readable form. Otherwise treat the
    # arguments as files to be validated against the schema.
    if len(sys.argv) == 1:
        print ExportConfigFormat.describe()
    else:
        for filename in sys.argv[1:]:
            print "Opening and validating: {}".format(filename)
            try:
                ExportConfigFormat.from_filename(filename)
                print "OK!"
            except Exception as e:
                print e
